# üé® –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –°—Ç–∏–ª—è –¥–ª—è –¢–ì –ö–∞–Ω–∞–ª–∞

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ê–≤—Ç–æ—Ä—ã —Å—Ç–∞—Ç–µ–π —á–∞—Å—Ç–æ –ø–∏—à—É—Ç –≤ –ª–∏—á–Ω–æ–º —Å—Ç–∏–ª–µ:
- ‚ùå "–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ò–≤–∞–Ω, –∏ —è —Ö–æ—á—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å..."
- ‚ùå "–°–µ–≥–æ–¥–Ω—è —è —Ä–µ—à–∏–ª –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º –æ–ø—ã—Ç–æ–º..."
- ‚ùå "–î–∞–≤–Ω–æ —Ö–æ—Ç–µ–ª –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ —ç—Ç—É —Ç–µ–º—É..."
- ‚ùå "–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è —Ä–∞—Å—Å–∫–∞–∂—É –∫–∞–∫ —è..."

**–î–ª—è –¢–ì –∫–∞–Ω–∞–ª–∞ —ç—Ç–æ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–µ!**

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: StyleNormalizerAgent

–ù–æ–≤—ã–π –∞–≥–µ–Ω—Ç –∫–æ—Ç–æ—Ä—ã–π:
1. **–£–±–∏—Ä–∞–µ—Ç –ª–∏—á–Ω—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è**
   - "–ü—Ä–∏–≤–µ—Ç, –º–µ–Ω—è –∑–æ–≤—É—Ç..."
   - "–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è..."
   - "–•–æ—á—É –ø–æ–¥–µ–ª–∏—Ç—å—Å—è..."

2. **–î–µ–ª–∞–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å**
   - –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Ç–æ–Ω
   - –ë–µ–∑ –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞
   - –ü—Ä—è–º–æ –∫ –¥–µ–ª—É

3. **–ì–æ—Ç–æ–≤–∏—Ç –¥–ª—è –¢–ì –∫–∞–Ω–∞–ª–∞**
   - –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å
   - –ë–µ–∑ –≤–æ–¥—ã
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –†–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: –õ–∏—á–Ω–æ–µ –û–±—Ä–∞—â–µ–Ω–∏–µ

**–ë–´–õ–û:**
```
–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–ª–µ–∫—Å–∞–Ω–¥—Ä, –∏ —è backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫. 
–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è —Ö–æ—á—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –ø—Ä–æ —Ç–æ, –∫–∞–∫ —è –Ω–∞—Å—Ç—Ä–æ–∏–ª 
Docker –≤ production. –ù–µ–¥–∞–≤–Ω–æ —è —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π...
```

**–°–¢–ê–õ–û:**
```
Docker –≤ production —Ç—Ä–µ–±—É–µ—Ç —Ç—â–∞—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. 
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ 
—Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏...
```

### –ü—Ä–∏–º–µ—Ä 2: "–Ø" –≤ –Ω–∞—á–∞–ª–µ

**–ë–´–õ–û:**
```
–Ø –¥–æ–ª–≥–æ –∏—Å–∫–∞–ª —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤. 
–Ø –ø—Ä–æ–±–æ–≤–∞–ª Prometheus, Grafana, –Ω–æ –º–Ω–µ –Ω–µ –ø–æ–¥–æ—à–ª–∏. 
–¢–æ–≥–¥–∞ —è —Ä–µ—à–∏–ª –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç...
```

**–°–¢–ê–õ–û:**
```
–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ - –∫—Ä–∏—Ç–∏—á–Ω–∞—è –∑–∞–¥–∞—á–∞. 
–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è (Prometheus, Grafana) –Ω–µ –≤—Å–µ–≥–¥–∞ 
–ø–æ–∫—Ä—ã–≤–∞—é—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –†–∞–∑–±–µ—Ä—ë–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥...
```

### –ü—Ä–∏–º–µ—Ä 3: –ò—Å—Ç–æ—Ä–∏—è –æ—Ç –ü–µ—Ä–≤–æ–≥–æ –õ–∏—Ü–∞

**–ë–´–õ–û:**
```
–ö–æ–≥–¥–∞ —è –Ω–∞—á–∏–Ω–∞–ª –∏–∑—É—á–∞—Ç—å Kubernetes, —É –º–µ–Ω—è –±—ã–ª–æ –º–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤.
–Ø –Ω–µ –ø–æ–Ω–∏–º–∞–ª –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–¥—ã, —Å–µ—Ä–≤–∏—Å—ã. –°–µ–≥–æ–¥–Ω—è —è –ø–æ–¥–µ–ª—é—Å—å 
—Ç–µ–º, —á—Ç–æ —è —É–∑–Ω–∞–ª –∑–∞ –≥–æ–¥ —Ä–∞–±–æ—Ç—ã...
```

**–°–¢–ê–õ–û:**
```
Kubernetes –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å–ª–æ–∂–Ω—ã–º –Ω–∞ —Å—Ç–∞—Ä—Ç–µ. 
–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏: –ø–æ–¥—ã, —Å–µ—Ä–≤–∏—Å—ã, —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. 
–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ–ø—ã—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–¥—Ö–æ–¥—ã...
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–≤ Pipeline)

```bash
# MODE 3 —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é —Å—Ç–∏–ª—è
docker-compose exec api python run_full_pipeline.py 10
```

–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ: `editorial_rewritten`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –û–¥–Ω–æ–π –°—Ç–∞—Ç—å–µ

```bash
# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≥–µ–Ω—Ç
docker-compose exec api python test_style_agent.py
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
üé® –¢–ï–°–¢ –ê–ì–ï–ù–¢–ê –°–¢–ò–õ–ò–ó–ê–¶–ò–ò

‚úÖ Ollama –¥–æ—Å—Ç—É–ø–µ–Ω

üìÑ –û–†–ò–ì–ò–ù–ê–õ–¨–ù–ê–Ø –°–¢–ê–¢–¨–Ø:
   –ó–∞–≥–æ–ª–æ–≤–æ–∫: –ö–∞–∫ —è –Ω–∞–ø–∏—Å–∞–ª —Å–≤–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
   –ù–∞—á–∞–ª–æ: –ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç...

ü§ñ –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–≥–µ–Ω—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç–∏–ª—è...

======================================================================
–†–ï–ó–£–õ–¨–¢–ê–¢ –ù–û–†–ú–ê–õ–ò–ó–ê–¶–ò–ò:
======================================================================
–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã...
======================================================================

üìä –°–†–ê–í–ù–ï–ù–ò–ï:
   –û—Ä–∏–≥–∏–Ω–∞–ª: 5000 —Å–∏–º–≤–æ–ª–æ–≤
   –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–æ: 4200 —Å–∏–º–≤–æ–ª–æ–≤

üéØ –ß–¢–û –£–õ–£–ß–®–ï–ù–û:
   ‚úÖ –£–±—Ä–∞–Ω–æ '–º–µ–Ω—è –∑–æ–≤—É—Ç'
   ‚úÖ –£–±—Ä–∞–Ω–æ '—è —Ä–∞—Å—Å–∫–∞–∂—É'
   ‚úÖ –£–±—Ä–∞–Ω–æ '–ø—Ä–∏–≤–µ—Ç'
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from src.application.ai_services.orchestrator import AIOrchestrator

orchestrator = AIOrchestrator()

# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å—Ç–∏–ª—è
article = orchestrator.process_article(
    article,
    normalize_style=True,  # –í–∫–ª—é—á–∏—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é
    verbose=True
)

# –†–µ–∑—É–ª—å—Ç–∞—Ç –≤:
print(article.editorial_rewritten)
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å –ü—Ä–æ–º–ø—Ç

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ:
```
src/application/ai_services/agents/style_normalizer_agent.py
```

–í —Ñ—É–Ω–∫—Ü–∏–∏ `normalize_intro()` –Ω–∞–π–¥–∏—Ç–µ –ø—Ä–æ–º–ø—Ç –∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.

### –û—Ç–∫–ª—é—á–∏—Ç—å –¥–ª—è –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –°—Ç–∞—Ç–µ–π

```python
# –ë–µ–∑ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç–∏–ª—è
article = orchestrator.process_article(
    article,
    normalize_style=False  # –û—Ç–∫–ª—é—á–∏—Ç—å
)
```

### –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –î–ª–∏–Ω—É –¥–ª—è –¢–ì

```python
# –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –¥–ª–∏–Ω—ã
normalized = style_normalizer.normalize_full_text(
    content,
    max_length=3000  # –î–ª—è –¢–ì –ø–æ—Å—Ç–∞
)
```

---

## üìä –ì–¥–µ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

| –ü–æ–ª–µ | –ß—Ç–æ –°–æ–¥–µ—Ä–∂–∏—Ç |
|------|--------------|
| `content` | –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏ |
| `editorial_rewritten` | –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (–Ω–∞—á–∞–ª–æ) |
| `editorial_title` | –£–ª—É—á—à–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ |
| `editorial_teaser` | –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ |

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤ Directus

```
http://localhost:8055
‚Üí Content ‚Üí articles
‚Üí –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —Å—Ç–∞—Ç—å—é
‚Üí –ü–æ–ª–µ "Editorial Rewritten"
```

### –ß–µ—Ä–µ–∑ API

```bash
curl http://localhost:8000/api/v1/articles/1 | jq .editorial_rewritten
```

---

## üéØ –î–ª—è –¢–ì –ö–∞–Ω–∞–ª–∞

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ì–æ—Ç–æ–≤—ã–π –¢–µ–∫—Å—Ç

```python
# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—å—é
article = await repo.get_by_id(article_id)

# –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–ª—è –¢–ì
title = article.editorial_title or article.title
text = article.editorial_rewritten or article.content[:3000]
teaser = article.editorial_teaser

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –¢–ì
telegram_message = f"""
<b>{title}</b>

{teaser}

{text[:2000]}

–ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é: {article.url}
"""
```

---

## üîß –¢–æ–Ω–∫–∞—è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ß—Ç–æ –ù–ï –£–±–∏—Ä–∞—Ç—å

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è, –∏–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–æ–º–ø—Ç:

```python
# –í style_normalizer_agent.py
prompt = f"""...
–£–ë–ï–†–ò:
- "–ü—Ä–∏–≤–µ—Ç, –º–µ–Ω—è –∑–æ–≤—É—Ç..."
- "–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è —Ä–∞—Å—Å–∫–∞–∂—É..."

–ù–û –û–°–¢–ê–í–¨:
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–∫—Ç—ã
..."""
```

### –†–∞–∑–Ω—ã–µ –°—Ç–∏–ª–∏ –¥–ª—è –†–∞–∑–Ω—ã—Ö –¢–∏–ø–æ–≤

```python
if article.is_news:
    # –î–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π - –∫–æ—Ä–æ—Ç–∫–∏–π —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å
    normalized = style_normalizer.normalize_full_text(
        content,
        max_length=1500
    )
else:
    # –î–ª—è —Å—Ç–∞—Ç–µ–π - –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è
    normalized = style_normalizer.normalize_intro(content)
```

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–î–æ–±–∞–≤–ª—è–µ—Ç:** ~5-10 —Å–µ–∫—É–Ω–¥ –Ω–∞ —Å—Ç–∞—Ç—å—é

**–° –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π:**
```
1 —Å—Ç–∞—Ç—å—è: ~30-40 —Å–µ–∫ (–±—ã–ª–æ ~25-35)
10 —Å—Ç–∞—Ç–µ–π: ~5-7 –º–∏–Ω (–±—ã–ª–æ ~4-6)
```

**–û—Ç–∫–ª—é—á–∏—Ç—å –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏:**
```python
orchestrator.process_article(article, normalize_style=False)
```

---

## ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

```bash
# 1. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞—Ç—å–∏ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π
docker-compose exec api python run_full_pipeline.py 5

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
curl http://localhost:8000/api/v1/articles/?limit=1 | jq .editorial_rewritten

# 3. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ Directus
open http://localhost:8055

# 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–µ
docker-compose exec api python test_style_agent.py

–ì–û–¢–û–í–û! üéâ
```

---

## üéì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–î–õ–Ø –¢–ì –ö–ê–ù–ê–õ–ê:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `editorial_title` –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `editorial_rewritten` –¥–ª—è —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `editorial_teaser` –¥–ª—è –∞–Ω–æ–Ω—Å–∞

**–î–õ–Ø –°–ê–ô–¢–ê:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ `title` –∏ `content`
- ‚≠ê –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —É–ª—É—á—à–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏

**–î–õ–Ø RSS:**
- ‚úÖ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚≠ê –¢–∏–∑–µ—Ä –≤ –æ–ø–∏—Å–∞–Ω–∏–∏
