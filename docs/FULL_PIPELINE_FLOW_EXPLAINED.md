# ğŸ”„ ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ ÑÑ‚Ğ°Ñ‚ĞµĞ¹

## ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         run_full_pipeline_fixed.py                          â”‚
â”‚                           (Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¤ĞĞ—Ğ 1: ĞŸĞĞ Ğ¡Ğ˜ĞĞ“                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  HabrScraperService._scrape_articles()                                  â”‚â”‚
â”‚  â”‚  â†’ Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸ Ñ Habr                                              â”‚â”‚
â”‚  â”‚  â†’ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: [{title, content, url, author, tags, hubs}, ...]         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¤ĞĞ—Ğ 2: Ğ’ĞĞ›Ğ˜Ğ”ĞĞ¦Ğ˜Ğ¯ Ğ‘Ğ”                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ArticleRepositoryImpl.get_existing_urls()                              â”‚â”‚
â”‚  â”‚  â†’ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ ĞºĞ°ĞºĞ¸Ğµ URL ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ Ğ² PostgreSQL                            â”‚â”‚
â”‚  â”‚  â†’ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒĞµÑ‚ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ñ‹                                                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¤ĞĞ—Ğ 3: AI ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ (Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        AIOrchestrator                                   â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚ 1ï¸âƒ£ ClassifierAgent     â†’ ĞĞ¾Ğ²Ğ¾ÑÑ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ?                      â”‚  â”‚â”‚
â”‚  â”‚  â”‚ 2ï¸âƒ£ RelevanceAgent      â†’ ĞÑ†ĞµĞ½ĞºĞ° 0-10                              â”‚  â”‚â”‚
â”‚  â”‚  â”‚ 3ï¸âƒ£ SummarizerAgent     â†’ Ğ¢Ğ¸Ğ·ĞµÑ€ (ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ)                 â”‚  â”‚â”‚
â”‚  â”‚  â”‚ 4ï¸âƒ£ RewriterAgent       â†’ Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº                     â”‚  â”‚â”‚
â”‚  â”‚  â”‚ 5ï¸âƒ£ StyleNormalizerAgent â†’ ĞŸĞµÑ€ĞµĞ¿Ğ¸ÑĞ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚                      â”‚  â”‚â”‚
â”‚  â”‚  â”‚ 6ï¸âƒ£ QualityValidatorAgent â†’ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°                      â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¤ĞĞ—Ğ 4: Ğ¡ĞĞ¥Ğ ĞĞĞ•ĞĞ˜Ğ•                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL            â”‚    â”‚  Qdrant (ĞµÑĞ»Ğ¸ score >= min_relevance)  â”‚  â”‚
â”‚  â”‚  â†’ Ğ’ÑĞµ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸          â”‚    â”‚  â†’ Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ñ€ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

```
news-aggregator-pro/
â”œâ”€â”€ run_full_pipeline_fixed.py          # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°
â”œâ”€â”€ config/
â”‚   â””â”€â”€ models.yaml                     # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ models_config.py            # Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â””â”€â”€ ai_services/
â”‚   â”‚       â”œâ”€â”€ orchestrator.py         # ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ¾Ñ€ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
â”‚   â”‚       â””â”€â”€ agents/
â”‚   â”‚           â”œâ”€â”€ base_agent.py       # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
â”‚   â”‚           â”œâ”€â”€ classifier_agent.py # ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
â”‚   â”‚           â”œâ”€â”€ relevance_agent.py  # Ğ ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ
â”‚   â”‚           â”œâ”€â”€ summarizer_agent.py # Ğ¢Ğ¸Ğ·ĞµÑ€Ñ‹
â”‚   â”‚           â”œâ”€â”€ rewriter_agent.py   # Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¸
â”‚   â”‚           â”œâ”€â”€ style_normalizer_agent.py  # ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚           â””â”€â”€ quality_validator_agent.py # Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ infrastructure/
â”‚   â”‚   â””â”€â”€ ai/
â”‚   â”‚       â”œâ”€â”€ llm_provider.py         # ĞĞ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ñ LLM
â”‚   â”‚       â””â”€â”€ qdrant_client.py        # Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ğ°Ñ Ğ‘Ğ”
â”‚   â””â”€â”€ scrapers/
â”‚       â””â”€â”€ habr/
â”‚           â””â”€â”€ scraper_service.py      # ĞŸĞ°Ñ€ÑĞµÑ€ Habr
```

---

## ğŸš€ Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€: run_full_pipeline_fixed.py

### Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 27-35: Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ñ‹

```python
from src.scrapers.habr.scraper_service import HabrScraperService     # ĞŸĞ°Ñ€ÑĞµÑ€
from src.application.ai_services.orchestrator import AIOrchestrator  # ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ AI
from src.infrastructure.ai.qdrant_client import QdrantService        # Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
from src.infrastructure.config.database import AsyncSessionLocal     # Ğ‘Ğ” ÑĞµÑÑĞ¸Ñ
from src.infrastructure.persistence.article_repository_impl import ArticleRepositoryImpl  # Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
from src.application.commands.create_article_command import CreateArticleCommand  # ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ
from src.domain.value_objects.source_type import SourceType          # Ğ¢Ğ¸Ğ¿ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°
from src.domain.entities.article import Article                      # Ğ”Ğ¾Ğ¼ĞµĞ½Ğ½Ğ°Ñ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ÑŒ
from src.config.models_config import get_models_config               # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
```

### Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 64-77: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ° Article

```python
def create_article_from_data(data: Dict[str, Any]) -> Article:
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¾Ğ±ÑŠĞµĞºÑ‚ Article Ğ¸Ğ· ÑĞ»Ğ¾Ğ²Ğ°Ñ€Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ°Ñ€ÑĞµÑ€Ğ°."""
    article = Article(
        id=uuid.uuid4(),                           # Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼ UUID
        title=data.get('title', ''),               # Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº
        content=data.get('content', ''),           # ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚
        url=data.get('url', ''),                   # URL ÑÑ‚Ğ°Ñ‚ÑŒĞ¸
        source=SourceType.HABR,                    # Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº (Habr)
        author=data.get('author'),                 # ĞĞ²Ñ‚Ğ¾Ñ€
        published_at=data.get('published_at'),     # Ğ”Ğ°Ñ‚Ğ° Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸
        tags=data.get('tags', []),                 # Ğ¢ĞµĞ³Ğ¸
        hubs=data.get('hubs', [])                  # Ğ¥Ğ°Ğ±Ñ‹
    )
    return article
```

### Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 151-165: Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

```python
# 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ¿Ğ°Ñ€ÑĞµÑ€ Habr
scraper = HabrScraperService()

# 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ AI Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€
#    Ğ’Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ğ²ÑĞµ 6 Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
orchestrator = AIOrchestrator()

# 3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Qdrant Ğ´Ğ»Ñ Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
qdrant = QdrantService()
```

### Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 204-218: Ğ¤ĞĞ—Ğ 1 - ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³

```python
# ĞŸĞ°Ñ€ÑĞ¸Ğ¼ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸ Ñ Habr
# hubs_list = ["machine-learning", "ai"] - Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ñ…Ğ°Ğ±Ğ°Ğ¼
# parse_limit = limit * 3 - Ğ¿Ğ°Ñ€ÑĞ¸Ğ¼ Ñ Ğ·Ğ°Ğ¿Ğ°ÑĞ¾Ğ¼ (Ñ‡Ğ°ÑÑ‚ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ² Ğ‘Ğ”)

articles_data = await scraper._scrape_articles(parse_limit, hubs_list)

# articles_data = [
#     {
#         'title': 'ĞšĞ°Ğº Ñ Ğ¾Ğ±ÑƒÑ‡Ğ¸Ğ» Ğ½ĞµĞ¹Ñ€Ğ¾ÑĞµÑ‚ÑŒ...',
#         'content': 'ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸...',
#         'url': 'https://habr.com/ru/articles/123456/',
#         'author': 'username',
#         'published_at': datetime(2026, 1, 24),
#         'tags': ['python', 'ml'],
#         'hubs': ['machine-learning', 'python']
#     },
#     ...
# ]
```

### Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 220-236: Ğ¤ĞĞ—Ğ 2 - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ²

```python
async with AsyncSessionLocal() as session:
    repo = ArticleRepositoryImpl(session)
    
    # Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ²ÑĞµ URL Ğ¸Ğ· ÑĞ¿Ğ°Ñ€ÑĞµĞ½Ğ½Ñ‹Ñ… ÑÑ‚Ğ°Ñ‚ĞµĞ¹
    urls = [d['url'] for d in articles_data]
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ĞºĞ°ĞºĞ¸Ğµ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ Ğ² Ğ‘Ğ”
    existing = await repo.get_existing_urls(urls)
    # existing = {'https://habr.com/ru/articles/111/', 'https://habr.com/ru/articles/222/'}
    
    # ĞÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ¾Ğ²Ñ‹Ğµ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸ (Ğ½Ğµ Ğ² Ğ‘Ğ”), Ğ±ĞµÑ€Ñ‘Ğ¼ Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ {limit}
    new_articles_data = [d for d in articles_data if d['url'] not in existing][:limit]
```

### Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 253-311: Ğ¤ĞĞ—Ğ 3 - AI ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° (Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ»)

```python
for i, data in enumerate(new_articles_data, 1):
    # 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ¾Ğ±ÑŠĞµĞºÑ‚ Article Ğ¸Ğ· ÑÑ‹Ñ€Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
    article = create_article_from_data(data)
    
    # 2. ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‘Ğ¼ Ğ² Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ Ğ´Ğ»Ñ AI Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
    #    Ğ’Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ²ÑÑ Ğ¼Ğ°Ğ³Ğ¸Ñ (6 ÑˆĞ°Ğ³Ğ¾Ğ²)
    processed_article = orchestrator.process_article(
        article=article,
        verbose=verbose,
        min_relevance=min_relevance
    )
    
    # 3. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ² PostgreSQL
    command = CreateArticleCommand(
        title=processed_article.title,
        content=processed_article.content,
        url=processed_article.url,
        ai_summary=processed_article.editorial_teaser,    # Ğ¢Ğ¸Ğ·ĞµÑ€ Ğ¾Ñ‚ AI
        relevance_score=score,                            # ĞÑ†ĞµĞ½ĞºĞ° 0-10
        relevance_reason=processed_article.relevance_reason  # ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ñ‚Ğ°ĞºĞ°Ñ Ğ¾Ñ†ĞµĞ½ĞºĞ°
    )
    db_article = await repo.create(command)
    
    # 4. Ğ•ÑĞ»Ğ¸ Ñ€ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ >= Ğ¿Ğ¾Ñ€Ğ¾Ğ³Ğ°, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² Qdrant Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°
    if score >= min_relevance:
        qdrant.add_article(str(db_article.id), db_article.title, db_article.content)
```

---

## ğŸ¤– Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€: AIOrchestrator

**Ğ¤Ğ°Ğ¹Ğ»:** `src/application/ai_services/orchestrator.py`

### Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 74-109: Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°

```python
class AIOrchestrator:
    def __init__(
        self,
        provider: Optional[str] = None,      # "ollama" Ğ¸Ğ»Ğ¸ "openrouter"
        api_key: Optional[str] = None,       # Ğ”Ğ»Ñ OpenRouter
        config_path: str = "config/models.yaml",
        enable_validation: bool = True,       # Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ QualityValidator
        max_retries: int = 2                  # ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ñ‹ Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸
    ):
        # Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ Ğ¸Ğ· models.yaml
        self.config = ModelsConfig(config_path)
        
        # Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµĞ¼ Ñ‡Ñ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼
        # ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: "AIOrchestrator: profile=free_openrouter, provider=openrouter"
        profile = self.config.get_profile()
        logger.info(f"AIOrchestrator: profile={profile.name}, provider={profile.provider.value}")
        
        # Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼ Ğ²ÑĞµ 6 Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
        self._init_agents()
```

### Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 111-122: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

```python
def _init_agents(self):
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… AI Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²."""
    # ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑĞ²Ğ¾Ğ¹ LLM Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€
    self.classifier = ClassifierAgent(config=self.config)      # 1ï¸âƒ£
    self.relevance = RelevanceAgent(config=self.config)        # 2ï¸âƒ£
    self.summarizer = SummarizerAgent(config=self.config)      # 3ï¸âƒ£
    self.rewriter = RewriterAgent(config=self.config)          # 4ï¸âƒ£
    self.style_normalizer = StyleNormalizerAgent(config=self.config)  # 5ï¸âƒ£
    
    if self.enable_validation:
        self.validator = QualityValidatorAgent(config=self.config)    # 6ï¸âƒ£
```

### Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 124-190: Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´ process_article()

```python
def process_article(self, article, normalize_style=True, validate_quality=True, min_relevance=5):
    """ĞŸĞ¾Ğ»Ğ½Ğ°Ñ AI Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑŒĞ¸."""
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ğ¨ĞĞ“ 1ï¸âƒ£: ĞšĞ›ĞĞ¡Ğ¡Ğ˜Ğ¤Ğ˜ĞšĞĞ¦Ğ˜Ğ¯
    # ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼: ÑÑ‚Ğ¾ Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑÑ‚Ğ°Ñ‚ÑŒÑ?
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    result = self.classifier.classify_with_details(article.title, article.content)
    article.is_news = result.is_news  # True = Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚ÑŒ, False = ÑÑ‚Ğ°Ñ‚ÑŒÑ
    # Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµÑ‚: "ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ: ĞĞĞ’ĞĞ¡Ğ¢Ğ¬" Ğ¸Ğ»Ğ¸ "ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ: Ğ¡Ğ¢ĞĞ¢Ğ¬Ğ¯"
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ğ¨ĞĞ“ 2ï¸âƒ£: ĞĞ¦Ğ•ĞĞšĞ Ğ Ğ•Ğ›Ğ•Ğ’ĞĞĞ¢ĞĞĞ¡Ğ¢Ğ˜
    # ĞĞ°ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ°Ñ‚ÑŒÑ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ğ° Ğ´Ğ»Ñ Ñ†ĞµĞ»ĞµĞ²Ğ¾Ğ¹ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ (0-10)
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    result = self.relevance.score_with_details(article.title, article.content, article.tags)
    article.set_relevance(result.score, result.reason)
    # result.score = 8
    # result.reason = "Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ Ğ¾ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¼ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ ML, Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ‚ĞµĞ¼Ğ°"
    # Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµÑ‚: "Ğ ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ: 8/10"
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ğ¨ĞĞ“ 3ï¸âƒ£: Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ• Ğ¢Ğ˜Ğ—Ğ•Ğ Ğ
    # ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ²ÑŒÑ (2-3 Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ)
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    result = self.summarizer.summarize_with_details(article.title, article.content)
    article.editorial_teaser = result.teaser
    # result.teaser = "Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ğ» ĞºĞ°Ğº Ğ¾Ğ±ÑƒÑ‡Ğ¸Ñ‚ÑŒ GPT Ğ½Ğ° ÑĞ²Ğ¾Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… 
    #                  Ğ·Ğ° $50. ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ğ³Ğ°Ğ¹Ğ´ Ñ ĞºĞ¾Ğ´Ğ¾Ğ¼ Ğ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°Ğ¼Ğ¸."
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ğ¨ĞĞ“ 4ï¸âƒ£: Ğ£Ğ›Ğ£Ğ§Ğ¨Ğ•ĞĞ˜Ğ• Ğ—ĞĞ“ĞĞ›ĞĞ’ĞšĞ
    # Ğ‘Ğ¾Ğ»ĞµĞµ Ğ¿Ñ€Ğ¸Ğ²Ğ»ĞµĞºĞ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    result = self.rewriter.rewrite_with_details(article.title, article.content)
    article.editorial_title = result.improved_title
    # Ğ‘Ñ‹Ğ»Ğ¾:    "ĞœĞ¾Ğ¹ Ğ¾Ğ¿Ñ‹Ñ‚ Ñ ML"
    # Ğ¡Ñ‚Ğ°Ğ»Ğ¾:   "ĞšĞ°Ğº Ñ Ğ¾Ğ±ÑƒÑ‡Ğ¸Ğ» GPT Ğ½Ğ° Ğ´Ğ¾Ğ¼Ğ°ÑˆĞ½ĞµĞ¼ ĞºĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€Ğµ Ğ·Ğ° Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ"
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ğ¨ĞĞ“ 5ï¸âƒ£: ĞĞĞ ĞœĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯ Ğ¡Ğ¢Ğ˜Ğ›Ğ¯
    # ĞŸĞµÑ€ĞµĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµĞ¼ Ñ‚ĞµĞºÑÑ‚ Ğ² ĞµĞ´Ğ¸Ğ½Ğ¾Ğ¼ Ñ€ĞµĞ´Ğ°ĞºÑ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğ¼ ÑÑ‚Ğ¸Ğ»Ğµ
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    if normalize_style and article.content:
        normalized = self._normalize_with_retry(article.content, validate_quality, metrics)
        article.editorial_rewritten = normalized
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ğ¨ĞĞ“ 6ï¸âƒ£: Ğ’ĞĞ›Ğ˜Ğ”ĞĞ¦Ğ˜Ğ¯ ĞšĞĞ§Ğ•Ğ¡Ğ¢Ğ’Ğ (Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ _normalize_with_retry)
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ‡Ñ‚Ğ¾ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ğ½Ğµ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ» ÑĞ¼Ñ‹ÑĞ»
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # validation = self.validator.validate(original, normalized)
    # validation.is_valid = True/False
    # validation.score = 0.85
    # validation.issues = ["ĞŸĞ¾Ñ‚ĞµÑ€ÑĞ½Ñ‹ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ„Ğ°ĞºÑ‚Ñ‹"]
    
    return article  # Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‰Ñ‘Ğ½Ğ½ÑƒÑ ÑÑ‚Ğ°Ñ‚ÑŒÑ
```

---

## ğŸ§  Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°

### 1ï¸âƒ£ ClassifierAgent (classifier_agent.py)

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ñ‚Ğ¸Ğ¿ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° â€” Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑÑ‚Ğ°Ñ‚ÑŒÑ.

**ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ (ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ¾):**
```
Classify this content:
Title: {title}
Content: {content[:2000]}

Is this a NEWS article (short, factual, recent event) 
or an ARTICLE (analysis, tutorial, opinion)?

Respond with JSON:
{"is_news": true/false, "confidence": 0.0-1.0, "reasoning": "..."}
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```python
ClassificationResult(
    is_news=False,
    confidence=0.85,
    reasoning="Ğ­Ñ‚Ğ¾ tutorial Ñ Ğ¿Ğ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸ÑĞ¼Ğ¸, Ğ½Ğµ Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚ÑŒ"
)
```

---

### 2ï¸âƒ£ RelevanceAgent (relevance_agent.py)

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** ĞÑ†ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ°Ñ‚ÑŒÑ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ğ° Ñ†ĞµĞ»ĞµĞ²Ğ¾Ğ¹ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸.

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ¾Ñ†ĞµĞ½ĞºĞ¸:**
- ĞĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ñ‚ĞµĞ¼Ñ‹
- ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ
- Ğ“Ğ»ÑƒĞ±Ğ¸Ğ½Ğ° Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ°
- Ğ¦ĞµĞ»ĞµĞ²Ğ°Ñ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ (AI/ML ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸ÑÑ‚Ñ‹)

**ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ (ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ¾):**
```
Rate this article's relevance for AI/ML professionals (0-10):
Title: {title}
Tags: {tags}
Content preview: {content[:3000]}

Consider:
- Is it about AI, ML, Data Science?
- Is it practical or theoretical?
- Is it for beginners or experts?

Respond with JSON:
{"score": 8, "reason": "Practical ML tutorial with code examples"}
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```python
RelevanceResult(
    score=8,
    reason="ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ‚ÑƒÑ‚Ğ¾Ñ€Ğ¸Ğ°Ğ» Ğ¿Ğ¾ fine-tuning LLM Ñ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°Ğ¼Ğ¸ ĞºĞ¾Ğ´Ğ°"
)
```

---

### 3ï¸âƒ£ SummarizerAgent (summarizer_agent.py)

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºÑ€Ğ°Ñ‚ĞºĞ¸Ğ¹ Ñ‚Ğ¸Ğ·ĞµÑ€ Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ²ÑŒÑ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸.

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğº Ñ‚Ğ¸Ğ·ĞµÑ€Ñƒ:**
- 2-3 Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
- Ğ—Ğ°Ñ…Ğ²Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ
- ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‘Ñ‚ ÑÑƒÑ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑŒĞ¸
- Ğ‘ĞµĞ· ÑĞ¿Ğ¾Ğ¹Ğ»ĞµÑ€Ğ¾Ğ²

**ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ (ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ¾):**
```
Create an engaging teaser (2-3 sentences) for this article:
Title: {title}
Content: {content[:4000]}

The teaser should:
- Hook the reader
- Summarize the main value
- Not give away everything

Respond with JSON:
{"teaser": "...", "key_points": ["point1", "point2"]}
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```python
SummaryResult(
    teaser="Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ¸Ğ· Google Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ğ» ĞºĞ°Ğº Ğ´Ğ¾Ğ¾Ğ±ÑƒÑ‡Ğ¸Ñ‚ÑŒ Llama 3 Ğ½Ğ° ÑĞ²Ğ¾Ğ¸Ñ… 
            Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ·Ğ° $50 Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ LoRA. ĞŸĞ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ³Ğ°Ğ¹Ğ´ Ñ ĞºĞ¾Ğ´Ğ¾Ğ¼ Ğ¸ 
            ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸ĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ².",
    key_points=["LoRA fine-tuning", "Llama 3", "Ğ”Ñ‘ÑˆĞµĞ²Ğ¾ Ğ¸ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾"]
)
```

---

### 4ï¸âƒ£ RewriterAgent (rewriter_agent.py)

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº â€” ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ ĞµĞ³Ğ¾ Ğ±Ğ¾Ğ»ĞµĞµ Ğ¿Ñ€Ğ¸Ğ²Ğ»ĞµĞºĞ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¼.

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
- ĞšĞ»Ğ¸ĞºĞ±ĞµĞ¹Ñ‚, Ğ½Ğ¾ Ğ½Ğµ Ğ¶Ñ‘Ğ»Ñ‚Ñ‹Ğ¹
- Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹
- SEO-Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹
- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ ÑÑƒÑ‚ÑŒ

**ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ (ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ¾):**
```
Improve this article title:
Original: {title}
Content preview: {content[:2000]}

Requirements:
- More engaging and specific
- Include key benefit or insight
- Keep it under 80 characters
- No clickbait lies

Respond with JSON:
{"improved_title": "...", "changes_made": ["..."]}
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```python
RewriteResult(
    original_title="ĞœĞ¾Ğ¹ Ğ¾Ğ¿Ñ‹Ñ‚ Ñ ML",
    improved_title="ĞšĞ°Ğº Ñ Ğ¾Ğ±ÑƒÑ‡Ğ¸Ğ» GPT Ğ½Ğ° Ğ´Ğ¾Ğ¼Ğ°ÑˆĞ½ĞµĞ¼ ĞºĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€Ğµ Ğ·Ğ° $50 Ğ¸ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ",
    changes_made=["Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ¸ĞºĞ°", "Ğ£ĞºĞ°Ğ·Ğ°Ğ½Ğ° ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ", "Ğ£ĞºĞ°Ğ·Ğ°Ğ½Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ"]
)
```

---

### 5ï¸âƒ£ StyleNormalizerAgent (style_normalizer_agent.py)

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** ĞŸĞµÑ€ĞµĞ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚ Ğ² ĞµĞ´Ğ¸Ğ½Ğ¾Ğ¼ Ñ€ĞµĞ´Ğ°ĞºÑ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğ¼ ÑÑ‚Ğ¸Ğ»Ğµ.

**Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚:**
- Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ
- ĞŸÑ€Ğ¸Ğ²Ğ¾Ğ´Ğ¸Ñ‚ Ğº ĞµĞ´Ğ¸Ğ½Ğ¾Ğ¼Ñƒ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñƒ
- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ²ÑÑ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºÑƒÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
- Ğ£Ğ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ

**ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ (ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ¾):**
```
Rewrite this technical article in a professional editorial style:

{content}

Requirements:
- Keep all technical details and code
- Use professional tone
- Improve structure and flow
- Remove casual language and filler words
- Preserve all facts and examples

Return the rewritten text.
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```python
NormalizationResult(
    normalized_text="[ĞŸĞµÑ€ĞµĞ¿Ğ¸ÑĞ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ğ² Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼ ÑÑ‚Ğ¸Ğ»Ğµ]",
    changes_made=["Ğ£Ğ±Ñ€Ğ°Ğ½ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ñ‚Ğ¾Ğ½", "Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ° ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°", "Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ğ¿Ğ¾Ğ´Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¸"]
)
```

---

### 6ï¸âƒ£ QualityValidatorAgent (quality_validator_agent.py)

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ğ½Ğµ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ» ÑĞ¼Ñ‹ÑĞ».

**Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚:**
- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹ Ğ»Ğ¸ Ğ²ÑĞµ Ñ„Ğ°ĞºÑ‚Ñ‹?
- ĞĞµ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»ÑÑ Ğ»Ğ¸ ÑĞ¼Ñ‹ÑĞ»?
- ĞÑÑ‚Ğ°Ğ»ÑÑ Ğ»Ğ¸ ĞºĞ¾Ğ´ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğ¼?
- ĞĞµÑ‚ Ğ»Ğ¸ Ğ³Ğ°Ğ»Ğ»ÑÑ†Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¹?

**ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ (ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ¾):**
```
Compare original and rewritten text. Check for:
1. Lost facts or details
2. Changed meaning
3. Added false information
4. Code correctness

Original: {original}
Rewritten: {rewritten}

Respond with JSON:
{"is_valid": true/false, "score": 0.0-1.0, "issues": ["..."]}
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```python
ValidationResult(
    is_valid=True,
    score=0.92,
    issues=[]  # Ğ˜Ğ»Ğ¸ ["ĞŸĞ¾Ñ‚ĞµÑ€ÑĞ½Ğ° ÑÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° GitHub Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹"]
)
```

---

## âš™ï¸ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ: models.yaml

```yaml
# ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ
active_profile: free_openrouter

profiles:
  # Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ OpenRouter
  free_openrouter:
    provider: openrouter
    agents:
      classifier:
        model: "z-ai/glm-4.5-air:free"
        temperature: 0.3      # ĞĞ¸Ğ·ĞºĞ°Ñ = Ğ±Ğ¾Ğ»ĞµĞµ Ğ´ĞµÑ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹
        max_tokens: 100       # ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚
      relevance:
        model: "z-ai/glm-4.5-air:free"
        temperature: 0.4
        max_tokens: 300
      summarizer:
        model: "z-ai/glm-4.5-air:free"
        temperature: 0.5      # Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ = Ğ±Ğ°Ğ»Ğ°Ğ½Ñ
        max_tokens: 300
      rewriter:
        model: "z-ai/glm-4.5-air:free"
        temperature: 0.6      # Ğ’Ñ‹ÑˆĞµ = Ğ±Ğ¾Ğ»ĞµĞµ ĞºÑ€ĞµĞ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹
        max_tokens: 200
      style_normalizer:
        model: "z-ai/glm-4.5-air:free"
        temperature: 0.3
        max_tokens: 8000      # Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ = Ğ´Ğ»Ñ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ñ… ÑÑ‚Ğ°Ñ‚ĞµĞ¹
      quality_validator:
        model: "z-ai/glm-4.5-air:free"
        temperature: 0.2      # ĞÑ‡ĞµĞ½ÑŒ Ğ½Ğ¸Ğ·ĞºĞ°Ñ = ÑÑ‚Ñ€Ğ¾Ğ³Ğ¸Ğ¹
        max_tokens: 500
```

---

## ğŸ”Œ Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°: LLM Provider

**Ğ¤Ğ°Ğ¹Ğ»:** `src/infrastructure/ai/llm_provider.py`

### Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ ĞºĞ»Ğ°ÑÑĞ¾Ğ²:

```
LLMProvider (ABC)              # ĞĞ±ÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ
    â”‚
    â”œâ”€â”€ OllamaProvider         # Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ollama
    â”‚   â””â”€â”€ _create_client()   # â†’ ChatOllama
    â”‚
    â””â”€â”€ OpenRouterProvider     # ĞĞ±Ğ»Ğ°Ñ‡Ğ½Ñ‹Ğ¹ OpenRouter  
        â””â”€â”€ _create_client()   # â†’ ChatOpenAI (Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¼ base_url)
```

### LLMProviderFactory:

```python
class LLMProviderFactory:
    """Ğ¤Ğ°Ğ±Ñ€Ğ¸ĞºĞ° Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ¾Ğ²."""
    
    _providers = {
        LLMProviderType.OLLAMA: OllamaProvider,
        LLMProviderType.OPENROUTER: OpenRouterProvider,
    }
    
    @classmethod
    def create(cls, config: LLMConfig) -> LLMProvider:
        provider_class = cls._providers[config.provider]
        return provider_class(config)
```

### OpenRouterProvider._create_client():

```python
def _create_client(self) -> BaseChatModel:
    from langchain_openai import ChatOpenAI
    
    model = self._resolve_model(self.config.model)
    
    client_kwargs = {
        "model": model,
        "openai_api_key": self.config.api_key,
        "openai_api_base": "https://openrouter.ai/api/v1",  # ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ URL!
        "temperature": self.config.temperature,
        "max_tokens": self.config.max_tokens,
        "timeout": self.config.timeout,
        "default_headers": {
            "HTTP-Referer": "https://news-aggregator-pro.local",
            "X-Title": "News Aggregator Pro"
        }
    }
    
    # Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ´Ğ»Ñ GLM Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹ (Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ thinking mode)
    if "glm" in model.lower():
        client_kwargs["extra_body"] = {"reasoning": {"enabled": False}}
    
    return ChatOpenAI(**client_kwargs)
```

---

## ğŸ“Š ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Data Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Ğ’Ğ¥ĞĞ”                                            â”‚
â”‚  python run_full_pipeline_fixed.py 3 "machine-learning,ai" -v               â”‚
â”‚                                                                              â”‚
â”‚  limit=3           â†’ ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ 3 ÑÑ‚Ğ°Ñ‚ÑŒĞ¸                                     â”‚
â”‚  hubs="ml,ai"      â†’ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ñ…Ğ°Ğ±Ğ°Ğ¼                                        â”‚
â”‚  --verbose         â†’ ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´                                        â”‚
â”‚  --min-relevance=5 â†’ ĞŸĞ¾Ñ€Ğ¾Ğ³ Ğ´Ğ»Ñ Qdrant                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HabrScraperService._scrape_articles(9, ["machine-learning", "ai"])         â”‚
â”‚                                                                              â”‚
â”‚  Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ 9 ÑÑ‚Ğ°Ñ‚ĞµĞ¹ (limit * 3 = Ğ·Ğ°Ğ¿Ğ°Ñ Ğ½Ğ° Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ñ‹):                      â”‚
â”‚  [                                                                           â”‚
â”‚    {title: "...", content: "...", url: "habr.com/123", tags: [...], ...},   â”‚
â”‚    {title: "...", content: "...", url: "habr.com/456", tags: [...], ...},   â”‚
â”‚    ...                                                                       â”‚
â”‚  ]                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ArticleRepositoryImpl.get_existing_urls([url1, url2, ...])                 â”‚
â”‚                                                                              â”‚
â”‚  SQL: SELECT url FROM articles WHERE url IN (...)                           â”‚
â”‚  Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: {"habr.com/111", "habr.com/222"}  â† Ğ£Ğ¶Ğµ Ğ² Ğ‘Ğ”                   â”‚
â”‚                                                                              â”‚
â”‚  Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒĞµĞ¼: 9 ÑĞ¿Ğ°Ñ€ÑĞµĞ½Ğ¾ - 2 Ğ² Ğ‘Ğ” = 7 Ğ½Ğ¾Ğ²Ñ‹Ñ… â†’ Ğ±ĞµÑ€Ñ‘Ğ¼ Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ 3                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ¸Ğ· 3 Ğ½Ğ¾Ğ²Ñ‹Ñ… ÑÑ‚Ğ°Ñ‚ĞµĞ¹:                                              â”‚
â”‚                                                                              â”‚
â”‚  article = create_article_from_data(data)                                   â”‚
â”‚  Article(                                                                    â”‚
â”‚    id=UUID("9bd3deb6-..."),                                                 â”‚
â”‚    title="ĞšĞ°Ğº Ğ¾Ğ±ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ½ĞµĞ¹Ñ€Ğ¾ÑĞµÑ‚ÑŒ...",                                        â”‚
â”‚    content="ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ 50KB...",                                          â”‚
â”‚    url="habr.com/789",                                                      â”‚
â”‚    source=SourceType.HABR,                                                  â”‚
â”‚    tags=["python", "ml"],                                                   â”‚
â”‚    hubs=["machine-learning"]                                                â”‚
â”‚  )                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  orchestrator.process_article(article)                                       â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1ï¸âƒ£ classifier.classify_with_details(title, content)                    â”‚ â”‚
â”‚  â”‚    â†’ HTTP POST https://openrouter.ai/api/v1/chat/completions           â”‚ â”‚
â”‚  â”‚    â†’ Response: {"is_news": false, "confidence": 0.85}                  â”‚ â”‚
â”‚  â”‚    â†’ article.is_news = False                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 2ï¸âƒ£ relevance.score_with_details(title, content, tags)                  â”‚ â”‚
â”‚  â”‚    â†’ HTTP POST https://openrouter.ai/api/v1/chat/completions           â”‚ â”‚
â”‚  â”‚    â†’ Response: {"score": 8, "reason": "ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ML Ñ‚ÑƒÑ‚Ğ¾Ñ€Ğ¸Ğ°Ğ»"}      â”‚ â”‚
â”‚  â”‚    â†’ article.relevance_score = 8                                       â”‚ â”‚
â”‚  â”‚    â†’ article.relevance_reason = "ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ML Ñ‚ÑƒÑ‚Ğ¾Ñ€Ğ¸Ğ°Ğ»"             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 3ï¸âƒ£ summarizer.summarize_with_details(title, content)                   â”‚ â”‚
â”‚  â”‚    â†’ HTTP POST ...                                                     â”‚ â”‚
â”‚  â”‚    â†’ article.editorial_teaser = "Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ğ» ĞºĞ°Ğº..."           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 4ï¸âƒ£ rewriter.rewrite_with_details(title, content)                       â”‚ â”‚
â”‚  â”‚    â†’ HTTP POST ...                                                     â”‚ â”‚
â”‚  â”‚    â†’ article.editorial_title = "ĞšĞ°Ğº Ğ¾Ğ±ÑƒÑ‡Ğ¸Ñ‚ÑŒ GPT Ğ·Ğ° $50..."             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 5ï¸âƒ£ style_normalizer.normalize_with_details(content)                    â”‚ â”‚
â”‚  â”‚    â†’ HTTP POST ... (ÑĞ°Ğ¼Ñ‹Ğ¹ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ, Ğ²ĞµÑÑŒ Ñ‚ĞµĞºÑÑ‚)                  â”‚ â”‚
â”‚  â”‚    â†’ article.editorial_rewritten = "[ĞŸĞµÑ€ĞµĞ¿Ğ¸ÑĞ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚]"              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 6ï¸âƒ£ validator.validate(original, rewritten)                             â”‚ â”‚
â”‚  â”‚    â†’ HTTP POST ...                                                     â”‚ â”‚
â”‚  â”‚    â†’ ValidationResult(is_valid=True, score=0.92)                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‰Ñ‘Ğ½Ğ½ÑƒÑ ÑÑ‚Ğ°Ñ‚ÑŒÑ:                                             â”‚
â”‚  Article(                                                                    â”‚
â”‚    ...Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ...,                                                 â”‚
â”‚    is_news=False,                        â† Ğ¾Ñ‚ classifier                    â”‚
â”‚    relevance_score=8,                    â† Ğ¾Ñ‚ relevance                     â”‚
â”‚    relevance_reason="...",               â† Ğ¾Ñ‚ relevance                     â”‚
â”‚    editorial_teaser="...",               â† Ğ¾Ñ‚ summarizer                    â”‚
â”‚    editorial_title="...",                â† Ğ¾Ñ‚ rewriter                      â”‚
â”‚    editorial_rewritten="...",            â† Ğ¾Ñ‚ style_normalizer              â”‚
â”‚    embedding_status="processed"                                             â”‚
â”‚  )                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² PostgreSQL                                                     â”‚
â”‚                                                                              â”‚
â”‚  command = CreateArticleCommand(title, content, url, ai_summary, score, ...)â”‚
â”‚  db_article = await repo.create(command)                                    â”‚
â”‚  await session.commit()                                                     â”‚
â”‚                                                                              â”‚
â”‚  SQL: INSERT INTO articles (id, title, content, url, ai_summary,            â”‚
â”‚        relevance_score, ...) VALUES (...)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Qdrant (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ score >= min_relevance)                   â”‚
â”‚                                                                              â”‚
â”‚  if score >= 5:  # min_relevance=5                                          â”‚
â”‚      qdrant.add_article(                                                    â”‚
â”‚          id=str(db_article.id),                                             â”‚
â”‚          title=db_article.title,                                            â”‚
â”‚          content=db_article.content                                         â”‚
â”‚      )                                                                       â”‚
â”‚                                                                              â”‚
â”‚  Ğ’Ğ½ÑƒÑ‚Ñ€Ğ¸:                                                                    â”‚
â”‚  1. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ embedding Ñ‡ĞµÑ€ĞµĞ· sentence-transformers                         â”‚
â”‚  2. Upsert Ğ² ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ "articles"                                          â”‚
â”‚  3. Ğ¢ĞµĞ¿ĞµÑ€ÑŒ ÑÑ‚Ğ°Ñ‚ÑŒÑ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ´Ğ»Ñ ÑĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ°                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Ğ’Ğ«Ğ¥ĞĞ”                                           â”‚
â”‚                                                                              â”‚
â”‚  ================================================================================â”‚
â”‚  Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢Ğ«                                                                  â”‚
â”‚  ================================================================================â”‚
â”‚    ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ¾:                                                           3  â”‚
â”‚    Ğ’ Ğ‘Ğ”:                                                                 3  â”‚
â”‚    Ğ’ Qdrant:                                                             2  â”‚
â”‚    ĞĞ¸Ğ·ĞºĞ°Ñ Ñ€ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ:                                                 1  â”‚
â”‚    ĞÑˆĞ¸Ğ±Ğ¾Ğº:                                                               0  â”‚
â”‚    Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ:                                                    15.23Ñ â”‚
â”‚    ĞĞ±Ñ‰ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ:                                                      48.72Ñ â”‚
â”‚    Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:                                                        âœ… Ğ£Ğ¡ĞŸĞ•Ğ¥  â”‚
â”‚  ================================================================================â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Ğ ĞµĞ·ÑĞ¼Ğµ

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¤Ğ°Ğ¹Ğ» | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° |
|-----------|------|--------|
| **Pipeline** | `run_full_pipeline_fixed.py` | ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… Ñ„Ğ°Ğ· |
| **Scraper** | `scraper_service.py` | ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Habr |
| **Repository** | `article_repository_impl.py` | Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ PostgreSQL |
| **Orchestrator** | `orchestrator.py` | ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ AI Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² |
| **ClassifierAgent** | `classifier_agent.py` | ĞĞ¾Ğ²Ğ¾ÑÑ‚ÑŒ Ğ¸Ğ»Ğ¸ ÑÑ‚Ğ°Ñ‚ÑŒÑ? |
| **RelevanceAgent** | `relevance_agent.py` | ĞÑ†ĞµĞ½ĞºĞ° 0-10 |
| **SummarizerAgent** | `summarizer_agent.py` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ‚Ğ¸Ğ·ĞµÑ€Ğ° |
| **RewriterAgent** | `rewriter_agent.py` | Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ° |
| **StyleNormalizer** | `style_normalizer_agent.py` | ĞŸĞµÑ€ĞµĞ¿Ğ¸ÑÑ‹Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚ĞµĞºÑÑ‚Ğ° |
| **QualityValidator** | `quality_validator_agent.py` | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° |
| **LLMProvider** | `llm_provider.py` | ĞĞ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ñ Ğ½Ğ°Ğ´ LLM |
| **QdrantService** | `qdrant_client.py` | Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº |
| **ModelsConfig** | `models_config.py` | Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° `models.yaml` |